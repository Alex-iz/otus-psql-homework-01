# otus-psql-homework-01

Курс "PostgreSQL для администраторов баз данных и разработчиков". Домашнее задание №1.

Задания и решения:

1. Создать новый проект в Яндекс облако или на любых ВМ, докере.
   Решение: На ПК с Ubuntu установил docker по инструкции из документации https://docs.docker.com/engine/install/ubuntu/

2. Поставить PostgreSQL.
   Решение: Скачал и запустил образ postgres.

3. Зайти вторым ssh (вторая сессия).
   Решение: Подключился к запущенному контейнеру postgres в новом окне.

4. Запустить везде psql из под пользователя postgres.
   Решение:
   4.1. Зашел внутрь контейнера и подключился к PosqtgreSQL через psql в первом окне.
   4.2. Зашел внутрь контейнера и подключился к PosqtgreSQL через psql во втором окне.

5. Выключил auto commit.

6. В одной сессии создал новую таблицу и наполнил её данными.

7. Посмотреть текущий уровень изоляции: show transaction isolation level.
   Решение: Текущий уровень read committed.

8. Начать новую транзакцию в обоих сессиях с дефолтным (не меняя) уровнем изоляции.
   Решение: запустил BEGIN;

9. В первой сессии добавить новую запись insert into persons(first_name, second_name) values('sergey', 'sergeev');
   Решение: Добавил новую запись без коммита в одной сессии.

10. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

11. Видите ли вы новую запись и если да то почему?
    Решение: Новая запись в другой сессии не видна, т.к. транзакция в первой сессии не завершена.

12. Завершить первую транзакцию - commit;
    Решение: Завершил транзакцию в первой сессии через COMMIT;

13. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

14. Видите ли вы новую запись и если да то почему?
    Решение: Записи во второй сессии появились.
    Read Committed — уровень изоляции транзакций в PostgreSQL гарантирует, что транзакция видит только зафиксированные данные. Это предотвращает «грязное чтение» (чтение незафиксированных данных), но допускает «неповторяющееся чтение» (при повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными).

15. Завершите транзакцию во второй сессии.
    Решение: Завершил транзакцию во второй сессии через COMMIT;

16. Начать новые но уже repeatable read транзации - set transaction isolation level repeatable read;
    Решение: Начал новые транзакции в двух сессиях.

17. В первой сессии добавить новую запись insert into persons(first_name, second_name) values('sveta', 'svetova');
    Решение: добавил новую запись в первой сессии.

18. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.
19. Видите ли вы новую запись и если да то почему?
    Решение: Новая запись в другой сессии не видна.

20. Завершить первую транзакцию - commit;
    Решение: Завершил транзакцию в первой сессии через COMMIT;

21. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

22. Видите ли вы новую запись и если да то почему?
    Решение: Запись во второй сессии не видна.
    Repeatable Read («Повторяемое чтение») — уровень изоляции транзакций в управлении базами данных, который гарантирует, что повторное чтение данных возвращает те же значения, что были в начале транзакции.

23. Завершить первую транзакцию - commit;
    Решение: Завершил транзакцию в первой сессии через COMMIT;

24. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

25. Видите ли вы новую запись и если да то почему?
    Решение: Записи во второй сессии появились, т.к. обе транзакции завершены.
