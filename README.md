# otus-psql-homework-01

Курс "PostgreSQL для администраторов баз данных и разработчиков". Домашнее задание №1.

Задания и решения:

1. Создать новый проект в Яндекс облако или на любых ВМ, докере.
   Решение: На ПК с Ubuntu установил docker по инструкции из документации https://docs.docker.com/engine/install/ubuntu/

2. Поставить PostgreSQL.
   Решение: Скачал и запустил образ postgres.

   <img width="1240" height="143" alt="Снимок экрана 2025-12-01 153633" src="https://github.com/user-attachments/assets/a5ebddf9-06b7-4467-90d6-066202677bba" />

4. Зайти вторым ssh (вторая сессия).
   Решение: Подключился к запущенному контейнеру postgres в новом окне.

5. Запустить везде psql из под пользователя postgres.
   Решение:
   4.1. Зашел внутрь контейнера и подключился к PosqtgreSQL через psql в первом окне.
   4.2. Зашел внутрь контейнера и подключился к PosqtgreSQL через psql во втором окне.

6. Выключил auto commit.
   
   <img width="857" height="233" alt="Снимок экрана 2025-12-01 155430" src="https://github.com/user-attachments/assets/846f3751-eb41-4597-9919-4ecfd67a2db0" />

7. В одной сессии создал новую таблицу и наполнил её данными.

8. Посмотреть текущий уровень изоляции: show transaction isolation level.
   Решение: Текущий уровень read committed.

   <img width="478" height="432" alt="Снимок экрана 2025-12-01 155606" src="https://github.com/user-attachments/assets/23678eb9-30d1-4ecb-be8e-e33e718572bd" />

9. Начать новую транзакцию в обоих сессиях с дефолтным (не меняя) уровнем изоляции.
   Решение: запустил BEGIN;

10. В первой сессии добавить новую запись insert into persons(first_name, second_name) values('sergey', 'sergeev');
   Решение: Добавил новую запись без коммита в одной сессии.

11. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

12. Видите ли вы новую запись и если да то почему?
    Решение: Новая запись в другой сессии не видна, т.к. транзакция в первой сессии не завершена.

    <img width="782" height="213" alt="Снимок экрана 2025-12-01 155855" src="https://github.com/user-attachments/assets/0563f03c-f61a-4b31-b491-62494d8cebdb" />

13. Завершить первую транзакцию - commit;
    Решение: Завершил транзакцию в первой сессии через COMMIT;

14. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

15. Видите ли вы новую запись и если да то почему?
    Решение: Записи во второй сессии появились.
    Read Committed — уровень изоляции транзакций в PostgreSQL гарантирует, что транзакция видит только зафиксированные данные. Это предотвращает «грязное чтение» (чтение незафиксированных данных), но допускает «неповторяющееся чтение» (при повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными).
    
    <img width="779" height="222" alt="Снимок экрана 2025-12-01 160026" src="https://github.com/user-attachments/assets/975162f5-defa-4bb2-9dff-178046f33e91" />

16. Завершите транзакцию во второй сессии.
    Решение: Завершил транзакцию во второй сессии через COMMIT;

17. Начать новые но уже repeatable read транзации - set transaction isolation level repeatable read;
    Решение: Начал новые транзакции в двух сессиях.

18. В первой сессии добавить новую запись insert into persons(first_name, second_name) values('sveta', 'svetova');
    Решение: добавил новую запись в первой сессии.

19. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.
20. Видите ли вы новую запись и если да то почему?
    Решение: Новая запись в другой сессии не видна.

    <img width="1075" height="233" alt="Снимок экрана 2025-12-01 160347" src="https://github.com/user-attachments/assets/63596ee3-3174-4e35-81d3-d9172b372a0a" />

21. Завершить первую транзакцию - commit;
    Решение: Завершил транзакцию в первой сессии через COMMIT;

22. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

23. Видите ли вы новую запись и если да то почему?
    Решение: Запись во второй сессии не видна.
    Repeatable Read («Повторяемое чтение») — уровень изоляции транзакций в управлении базами данных, который гарантирует, что повторное чтение данных возвращает те же значения, что были в начале транзакции.

   <img width="1074" height="204" alt="Снимок экрана 2025-12-01 160546" src="https://github.com/user-attachments/assets/0c5da72e-d736-440a-b79e-af6e5bfb68f2" />
 
24. Завершить первую транзакцию - commit;
    Решение: Завершил транзакцию в первой сессии через COMMIT;

25. Сделать select from persons во второй сессии.
    Решение: Выбрал все записи из таблицы в другой сессии через SELECT \* FROM persons.

26. Видите ли вы новую запись и если да то почему?
    Решение: Записи во второй сессии появились, т.к. обе транзакции завершены.
    
<img width="1073" height="235" alt="Снимок экрана 2025-12-01 160649" src="https://github.com/user-attachments/assets/696a118f-7437-4516-90cb-2bce08e07c90" />

    
